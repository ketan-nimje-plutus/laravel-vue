import{f as o,b as n,i as c,q as m,x as _,F as p,p as h,t as g,d as v,o as r,n as y}from"./app-a6ab5911.js";import{_ as b}from"./_plugin-vue_export-helper-c27b6911.js";const x={created(){this.getUsers()},data(){let s={},t=[{label:"Name",name:"name"},{label:"Email",name:"email"},{label:"Date Added",name:"created_at"}];return t.forEach(a=>{s[a.name]=-1}),{users:[],columns:t,sortKey:"created_at",sortOrders:s,length:10,search:"",tableShow:{showdata:!0},pagination:{currentPage:1,total:"",nextPage:"",prevPage:"",from:"",to:""}}},methods:{deleteUser(s){axios.delete(`/users/${s}/delete`).then(()=>{swal("Success!","User deleted","success")}).catch(()=>{swal("Failed","There was something wrong","warning")})},getUsers(){axios.get("/admin/users/",{params:this.tableShow}).then(s=>{console.log("The data: ",s.data),this.users=s.data,this.pagination.total=this.users.length}).catch(s=>{console.log(s)})},paginate(s,t,a){return this.pagination.from=s.length?(a-1)*t+1:" ",this.pagination.to=a*t>s.length?s.length:a*t,this.pagination.prevPage=a>1?a:"",this.pagination.nextPage=s.length>this.pagination.to?a+1:"",s.slice((a-1)*t,a*t)},resetPagination(){this.pagination.currentPage=1,this.pagination.prevPage="",this.pagination.nextPage=""},sortBy(s){this.resetPagination(),this.sortKey=s,this.sortOrders[s]=this.sortOrders[s]*-1},getIndex(s,t,a){return s.findIndex(l=>l[t]==a)}},computed:{filteredUsers(){let s=this.users;this.search&&(s=s.filter(l=>Object.keys(l).some(e=>String(l[e]).toLowerCase().indexOf(this.search.toLowerCase())>-1)));let t=this.sortKey,a=this.sortOrders[t]||1;return t&&(s=s.slice().sort((l,e)=>{let d=this.getIndex(this.columns,"name",t);return l=String(l[t]).toLowerCase(),e=String(e[t]).toLowerCase(),this.columns[d].type&&this.columns[d].type==="date"?(l===e?0:new Date(l).getTime()>new Date(e).getTime()?1:-1)*a:this.columns[d].type&&this.columns[d].type==="number"?(+l==+e?0:+l>+e?1:-1)*a:(l===e?0:l>e?1:-1)*a})),s},paginatedUsers(){return this.paginate(this.filteredUsers,this.length,this.pagination.currentPage)}}},f={class:"users-style"},P=n("div",{style:{"margin-bottom":"20px"}},[n("h2",null,"Laravel and VueJS Datatable from Scratch")],-1),k={class:"table-style"},w={class:"control"},U={class:"select"},C=n("option",{value:"10"},"10",-1),S=n("option",{value:"20"},"20",-1),D=n("option",{value:"30"},"30",-1),O=[C,S,D],L={class:"table table-bordered table-responsive"},T=["onClick"],B=n("th",null,"Actions",-1),K=n("a",{href:"#",class:"dropdown-toggle","data-toggle":"dropdown","aria-expanded":"false"},null,-1),V={class:"dropdown-menu"},I=["onClick"],E={key:0,class:"pagination"},F={class:"page-stats"},A={key:1,class:"btn btn-sm btn-primary pagination-previous",disabled:""},M={key:3,class:"btn btn-sm btn-primary pagination-next",disabled:""},j={key:1,class:"pagination"},q={class:"page-stats"},z={key:0},J={key:1,class:"btn btn-sm pagination-previous btn-primary",disabled:""},G={key:3,class:"btn btn-sm pagination-next btn-primary",disabled:""};function H(s,t,a,l,e,d){return r(),o("div",f,[P,n("div",k,[c(n("input",{class:"input",type:"text","onUpdate:modelValue":t[0]||(t[0]=i=>e.search=i),placeholder:"Search...",onInput:t[1]||(t[1]=i=>d.resetPagination()),style:{width:"250px"}},null,544),[[m,e.search]]),n("div",w,[n("div",U,[c(n("select",{"onUpdate:modelValue":t[2]||(t[2]=i=>e.length=i),onChange:t[3]||(t[3]=i=>d.resetPagination())},O,544),[[_,e.length]])])])]),n("table",L,[n("thead",null,[n("tr",null,[(r(!0),o(p,null,h(e.columns,i=>(r(),o("th",{key:i.name,onClick:u=>d.sortBy(i.name),class:y(e.sortKey===i.name?e.sortOrders[i.name]>0?"sorting_asc":"sorting_desc":"sorting"),style:{width:"40%",cursor:"pointer"}},g(i.label),11,T))),128)),B])]),n("tbody",null,[(r(!0),o(p,null,h(d.paginatedUsers,i=>(r(),o("tr",{key:i.id},[n("td",null,g(i.name),1),n("td",null,g(i.email),1),n("td",null,g(i.created_at),1),n("td",null,[K,n("div",V,[n("a",{class:"dropdown-item text-primary",href:"#",onClick:u=>d.deleteUser(i.id)},"Delete User",8,I)])])]))),128))])]),n("div",null,[e.tableShow.showdata?(r(),o("nav",j,[n("span",q,[v(g(e.pagination.from)+" - "+g(e.pagination.to)+" of "+g(d.filteredUsers.length)+" ",1),(r(),o("span",z))]),e.pagination.prevPage?(r(),o("a",{key:0,class:"btn btn-sm btn-primary pagination-previous",onClick:t[6]||(t[6]=i=>--e.pagination.currentPage)}," Prev ")):(r(),o("a",J," Prev ")),e.pagination.nextPage?(r(),o("a",{key:2,class:"btn btn-sm btn-primary pagination-next",onClick:t[7]||(t[7]=i=>++e.pagination.currentPage)}," Next ")):(r(),o("a",G," Next "))])):(r(),o("nav",E,[n("span",F,g(e.pagination.from)+" - "+g(e.pagination.to)+" of "+g(e.pagination.total),1),e.pagination.prevPageUrl?(r(),o("a",{key:0,class:"btn btn-sm btn-primary pagination-previous",onClick:t[4]||(t[4]=i=>--e.pagination.currentPage)}," Prev ")):(r(),o("a",A," Prev ")),e.pagination.nextPageUrl?(r(),o("a",{key:2,class:"btn btn-sm pagination-next",onClick:t[5]||(t[5]=i=>++e.pagination.currentPage)}," Next ")):(r(),o("a",M," Next "))]))])])}const R=b(x,[["render",H]]);export{R as default};
